import { Body, Controller, Post, UsePipes, ValidationPipe } from '@nestjs/common';
import { ChatDto } from './dto/chat.dto';

@Controller('chat')
export class ChatController {
    @Post()
    @UsePipes(new ValidationPipe({ whitelist: true, forbidNonWhitelisted: true }))
    handleChat(@Body() payload: ChatDto) {
        console.log({ payload });

        return {
            response: 'Here is the answer with personality.',
            source_agent_response: 'Text generated by the specialized agent.',
            agent_workflow: [
                { agent: 'RouterAgent', decision: 'KnowledgeAgent' },
                { agent: 'KnowledgeAgent' }
            ]
        };
    }
}
